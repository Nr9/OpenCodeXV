<!doctype html>
<html lang="fr">

	<head>
		<meta charset="utf-8">

		<title>OpenCode XV - Groovy et Grails</title>

		<meta name="description" content="Présentation pour le le OpenCode XV">
		<meta name="author" content="Julien Marcil">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/studio133.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/googlecode.css">

		<!-- If the query includes 'print-pdf', use the PDF print sheet -->
		<script>
			document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
		</script>
		<style>
			.reveal section img.no-border {
				border: none; 
				box-shadow: none;
			}

			div.monospace {
				font-family: monospace;
			}

			#langpop
			{
				-webkit-box-sizing: border-box;
	  			-moz-box-sizing: border-box;
	        	box-sizing: border-box;
			}
		</style>
		
		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h1>Groovy et Grails</h1>
					<p>
						Julien Marcil
					</p>
					<p>
						<small><a href="mailto:julien@marcil.com">julien@marcil.com</a> - <a href="http://twitter.com/Nr9">@Nr9</a></small>
					</p>
					<div class="footer">
						<h5>OpenCode XV, 24 septembre 2013, Québec</h5>
					</div>
				</section>

				<!-- ******************************** Java ******************************** -->
				<section>
					<section>
						<h3>
							Java est un language très populaire.
						</h3>
						<img src="images/TIOBE-Index.png" alt="TIOBE Programming Community Index for September 2013"/>
						<p style="margin-top: -20px">
							<i><small>Source: TIOBE Programming Community Index for September 2013</small></i>
	        			</p>
					</section>
					<section>
						<h3>
							Java est un language très populaire.
						</h3>
						<img src="images/TIOBE-Index-Trend.png" alt="TIOBE Programming Community Index for September 2013"/>
						<p style="margin-top: -20px">
							<i><small>Source: TIOBE Programming Community Index for September 2013</small></i>
	        			</p>
					</section>
					<section>
						<iframe id="langpop" src="http://langpop.corger.nl/" width="80%" height="80%" style="margin:0;overflow:hidden;border:1px solid #CCC;border-width:1px 1px 0;margin-bottom:5px"> </iframe>
						
						<p>
							<i><small>Source: <a href="http://langpop.corger.nl/">http://langpop.corger.nl/</a></small></i>
	        			</p>

					</section>
				</section>

				<!-- ******************************** Groovy ******************************** -->
				<section>
					<img class="no-border" src="images/groovy-logo.png" alt="Groovy"/>
				</section>

				<section>
					<h2>Groovy</h2>
					<ul>
						<li>is an <strong>agile and dynamic</strong> language for the <b>Java Virtual Machine</b>.</li>
						<li>builds upon the strengths of Java but has <strong>additional power features</strong> inspired by languages like <b>Python</b>, <b>Ruby</b> and <b>Smalltalk</b>.</li>
						<li>makes modern programming features available to Java developers with <strong>almost-zero learning curve</strong>.</li>
						<li>supports <strong>Domain-Specific Languages</strong> and other compact syntax so your code becomes easy to read and maintain.</li>
					</ul>
				</section>


				<section>
					<h3>Un programme Java <strong>typique</strong></h3>
					<pre class="stretch"><code data-trim contenteditable>
public class HelloWorld {
    private String name;

    public void setName(String name) {
        this.name = name;
    }

    public String getName() {
        return name;
    }

    public String greet() {
        return "Hello " + name;
    }
    
    public static void main(String[] args) {
        HelloWorld helloWorld = new HelloWorld();
        helloWorld.setName("Groovy");
        System.out.println( helloWorld.greet() );
    }
}
					</code></pre>
				</section>

				<section>
					<h3>Un programme Groovy <strong>valide</strong></h3>
					<pre class="stretch"><code data-trim contenteditable>
public class HelloWorld {
    private String name;

    public void setName(String name) {
        this.name = name;
    }

    public String getName() {
        return name;
    }

    public String greet() {
        return "Hello " + name;
    }
    
    public static void main(String[] args) {
        HelloWorld helloWorld = new HelloWorld();
        helloWorld.setName("Groovy");
        System.out.println( helloWorld.greet() );
    }
}
					</code></pre>

				</section>
				<section>
					
					<section>
						<h2>Version plus Groovy!</h2>
						<pre><code data-trim>
class HelloWorld {
    def name
    def greet() { "Hello ${name}" }
}    

helloWorld = new HelloWorld(name: "Groovy")
println helloWorld.greet()
						</code></pre>
						<aside class="notes">
							<ul>
								<li>Dynamic Typing with def</li>
								<li>Variable Interpolation through GString</li>
								<li>return is optionnal</li>
								<li>semicolons are optionnal<li>
								<li>Constructor with named parameters</li>
							</ul>
						</aside>
					</section>

					<section>
						<h2>Ruby</h2>
						<pre><code data-trim language-ruby>
class HelloWorld < Struct.new(:name)
    def greet 
    	"Hello #{name}"
    end
end

hello_world = HelloWorld.new("Ruby")
puts hello_world.greet
						</code></pre>
						<aside class="notes">
							<ul>
								<li>Dynamic Typing with def</li>
								<li>Variable Interpolation through GString</li>
								<li>return is optionnal</li>
								<li>semicolons are optionnal<li>
								<li>Constructor with named parameters</li>
							</ul>
						</aside>
					</section>


				</section>

				<section>
					<h2>Interopérabilité complète</h2>
					<img class="no-border" src="images/interoperability.png" alt="Interopérabilité"/>
				</section>

				<section>
					<section>
						<h2>Syntaxe Groovy</h2>
						<p>
							La syntaxe Groovy est riche et flexible. Voici quelque examples.
						</p>
					</section>

					<section>
						<h2>GString</h2>
						<pre><code data-trim language-java>		
foxtype = 'quick'
foxcolor = ['b', 'r', 'o', 'w', 'n']
assert 'The quick brown fox' == "The $foxtype ${foxcolor.join()} fox"
						</code></pre>
					</section>

					<section>
						<h2>Operator Overloading</h2>
						<table width="100%">
							<tbody>
								<tr>
									<th>
										<pre><code data-trim language-java>
a == b
										</code></pre>
									</th>
									<td>
										<pre><code data-trim language-java>
a.equals(b) or a.compareTo(b) == 0
										</code></pre>
									</td>
								</tr>

								<tr>
									<th>
										<pre><code data-trim language-java>
a != b
										</code></pre>
									</th>
									<td>
										<pre><code data-trim language-java>
!a.equals(b)
										</code></pre>
									</td>
								</tr>
								<tr>
									<th>
										<pre><code data-trim language-java>
a <=> b
										</code></pre>
									</th>
									<td>
										<pre><code data-trim language-java>
a.compareTo(b)
										</code></pre>
									</td>
								</tr>
								<tr>
									<th>
										<pre><code data-trim language-java>
a > b
										</code></pre>
									</th>
									<td>
										<pre><code data-trim language-java>
a.compareTo(b) > 0
										</code></pre>
									</td>
								</tr>
								<tr>
									<th>
										<pre><code data-trim language-java>
a >= b
										</code></pre>
									</th>
									<td>
										<pre><code data-trim language-java>
a.compareTo(b) >= 0
										</code></pre>
									</td>
								</tr>
								<tr>
									<th>
										<pre><code data-trim language-java>
a < b
										</code></pre>
									</th>
									<td>
										<pre><code data-trim language-java>
a.compareTo(b) < 0
										</code></pre>
									</td>
								</tr>
								<tr>
									<th>
										<pre><code data-trim language-java>
a <= b
										</code></pre>
									</th>
									<td>
										<pre><code data-trim language-java>
a.compareTo(b) <= 0
										</code></pre>
									</td>
								</tr>
							</tbody>
						</table>	
					</section>

					<section>
						<h2>List</h2>
						<table width="100%">
							<tbody>
								<tr>
									<th>Java</th>
									<td>
										<pre><code data-trim language-java>
List&lt;Number&gt; numbers = new ArrayListt&lt;&gt;;
numbers.add(1);
numbers.add(2);
numbers.add(3);
										</code></pre>
									</td>
								</tr>
								<tr>
									<th>Groovy</th>
									<td>
										<pre><code data-trim language-java>
numbers = [1, 2, 3]
										</code></pre>
									</td>
								</tr>
							</tbody>
						</table>					
					</section>

					<section>
						<h2>Map</h2>
						<table width="100%">
							<tbody>
								<tr>
									<th>Java</th>
									<td>
										<pre><code data-trim language-java>
Map&lt;String, String&gt; family = new HashMap&lt;&gt;;
family.put("dad", "John");
family.put("mom", "Jane");
family.put("son", "John");
										</code></pre>
									</td>
								</tr>
								<tr>
									<th>Groovy</th>
									<td>
										<pre><code data-trim language-java>
family = [dad:"John" , mom:"Jane", son:"John"]
										</code></pre>
									</td>
								</tr>
							</tbody>
						</table>					
					</section>

					<section>
						<h2>Iteration</h2>
						<table width="100%">
							<tbody>
								<tr>
									<th>Java</th>
									<td>
										<pre><code data-trim language-java>
for (Number number : numbers)
{
    System.out.println(number);
}
										</code></pre>
									</td>
								</tr>
								<tr>
									<th>Groovy</th>
									<td>
										<pre><code data-trim language-java>
numbers.each { println it }
										</code></pre>
									</td>
								</tr>
							</tbody>
						</table>					
					</section>
				</section>	

				<section>
					<h2>Type dynamique</h2>
					<pre><code data-trim language-java>		
def v = 3
v = 'avion'
v = false
v = new StringBuffer()
v = null
					</code></pre>
				</section>


				<section>
					<h2>Closure</h2>
					<pre><code data-trim language-java>		
def f = { list, value -> list &lt;&lt; value }
x = []
f(x, 1)
f(x, 2)
f(x, 3)
assert x == [1, 2, 3]
					</code></pre>
				</section>

				<section>
					<section>
						<h2>Meta programmation</h2>
						<pre><code data-trim language-java>		
def s = "Hello Groovy"
String.metaClass.shout = { delegate.toUpperCase() }
assert s.shout() == "HELLO GROOVY"
						</code></pre>
					</section>		

					<section>
						<h2>Meta programmation</h2>
						<pre><code data-trim language-java>		
class SingletonCalculator {
    private total = 0
    def add(a) { total += a }
}
						</code></pre>
						<pre><code data-trim language-java>		
class CalculatorMetaClass extends MetaClassImpl {
    private final static INSTANCE = new SingletonCalculator()
    CalculatorMetaClass() { super(SingletonCalculator) }
    def invokeConstructor(Object[] arguments) { return INSTANCE }
}

def registry = GroovySystem.metaClassRegistry
registry.setMetaClass(SingletonCalculator, new CalculatorMetaClass())
						</code></pre>
						<pre><code data-trim language-java>		
def calc = new SingletonCalculator()
						</code></pre>
					</section>	
				</section>



				<section>
					<img class="no-border" src="images/grails-logo.jpg" alt="Grails"/>
				</section>

				<!-- ************************************************************************ -->
				<!-- ******************************** Grails ******************************** -->
				<!-- ************************************************************************ -->

				<section>
					<h2>Grails</h2>
					<ul>
						<li>Groovy <strong>Web Application Framework</strong>.</li>
						<li>inpired by Dynamic Frameworks like <b>Rails</b>, <b>Django</b> and <b>TurboGears</b>.</li>
						<li>based on the <strong>Don't Repeat Yourself</strong> (DRY) principle.</li>
						<li><strong>Convention over Configuration</strong>.</li>
					</ul>								
				</section>

				<section>
					<h3>Basé sur les meilleurs frameworks Java</h3>
					<ul>
						<li>Spring Framework
							<ul>
								<li>Spring MVC</li>
								<li>Spring Transaction</li>
								<li>Spring MessageSource (i18n)</li>			
							</ul>
						</li>
						<li>Hibenate</li>
						<li>SiteMesh</li>
						<li>embedded Tomcat</li>
					</ul>								
				</section>
				
				<section>
					<h3>Structure</h3>
					<img height="80%" class="no-border" src="images/grails-structure.png" alt="Projet Grails"/>
				</section>

				<section>
					<div class="monospace">
						<ul>
							<li>grails-app
								<ul>
									<li>conf</li>
									<li>controllers</li>
									<li>domain</li>	
									<li>i18n</li>	
									<li>services</li>	
									<li>taglib</li>	
									<li>views</li>	
								</ul>
							</li>
							<li>web-app</li>
							<li>scripts</li>
							<li>src
								<ul>
									<li>groovy</li>
									<li>java</li>
								</ul>
							</li>
							<li>test
								<ul>
									<li>integration</li>
									<li>unit</li>
								</ul>
							</li>

						</ul>	
					</div>
				</section>

				<section>
					<h2>Domain Classes</h2>
					<pre><code data-trim language-java>		
class Author {
    static hasMany = [books: Book]
    String name
}
					</code></pre>
					<pre><code data-trim language-java>		
class Book {
    static belongsTo = [author: Author]
    String title
}
					</code></pre>
				</section>

				<section>
					<h2>Domain Classes</h2>
					<pre class="stretch"><code data-trim language-java>		
class Book {
    static belongsTo = [author: Author]

    String title
    Date releaseDate
    String ISBN
    BigDecimal price

    static constraints = {
        title(blank: false, maxSize:100)
        isbn(blank: false, matches:"[0-9]13" minSize:13 maxSize:13, unique: true)
        price(nullable: true, min: 0.0, max: 9999.99, scale: 2)
    }

    static mapping = {
        table "books"
        price column: "sales_price"
    }

    def beforeInsert() { dateCreated = new Date() }
}
					</code></pre>
				</section>

				<section>
					<h2>CRUD</h2>
					<pre><code data-trim language-java>	
// Create	
def a = new Author(name: "King")
a.save()
					</code></pre>
					<pre><code data-trim language-java>		
// Read	
def a = Author.get(1);
					</code></pre>
					<pre><code data-trim language-java>		
// Update	
def a = Author.get(1);
a.name = "Stephen King"
a.save()
					</code></pre>
					<pre><code data-trim language-java>		
// Delete	
def a = Author.get(1);
a.delete()
					</code></pre>
				</section>

				<section>
					<h2>Dynamic Finder</h2>
					<pre><code data-trim language-java>		
Book.findByTitle("The Stand")

Book.findByTitleLike("Harry Pot%")

Book.findByReleaseDateBetween(firstDate, secondDate)

Book.findByReleaseDateGreaterThan(someDate)

Book.findByTitleLikeOrReleaseDateLessThan("%Something%", someDate)
					</code></pre>					
				</section>

				<section>
					<h2>Where Queries</h2>
					<pre><code data-trim language-java>		
def query = Person.where {
   firstName == "Julien"
}
Person julien = query.find()
					</code></pre>
					<pre><code data-trim language-java>		
def children = Book.findAll { age in 0..17 }
					</code></pre>					
				</section>

				<section>
					<h2>Critera</h2>
					<pre><code data-trim language-java>		
def criteria = Account.withCriteria {
    between("balance", 500, 1000)
    eq("branch", "London")
    or {
        like("holderFirstName", "Fred%")
        like("holderFirstName", "Barney%")
    }
    maxResults(10)
    order("holderLastName", "desc")
}
					</code></pre>

				</section>

				<section>
					<h2>Services</h2>
					<pre><code data-trim language-java>		
class BookService {

    static transactional = true
    static scope = "singleton" //prototype, request, flash, 
                               //conversation, session, singleton

    def authorService // the AuthorService will be injected

    def updateSomething() {
         // Business Logic
    }

    @Transactional(readOnly = true)
    def listBooks() {
        Book.list()
    }
}
					</code></pre>
				</section>

				<section>
					<h2>Controllers</h2>
					<pre><code data-trim language-java>		
class BookController {
    def list() {
        def map = [books: Book.list(params), total: Book.count()]
        render(view: "books", model: map)
    }

    def show() {
        [book: Book.get(params.id)]
    }
}
					</code></pre>
				</section>

				<section>
					<h2>Controllers</h2>
					<pre><code data-trim language-java>		
class BookController {
    def json()
    {
        render Book.list(params) as JSON
    }

    def xml()
    {
        render Book.list(params) as XML
    }
}
					</code></pre>
				</section>

				<section>
					<h2>GSP</h2>
					<pre><code data-trim language-java>		
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;${book?.title}&lt;/title&gt;
        &lt;r:require module="jquery"/&gt;
        &lt;r:layoutResources/&gt;
    &lt;/head&gt;
    &lt;body&gt;
        <div class="book" id="${book?.id}">
            <div>Title: ${book?.title}</div>
            <div>Author: ${book?.author?.name}</div>
        </div>
        &lt;r:layoutResources/&gt;
    &lt;/body&gt;
&lt;/html&gt;					
					</code></pre>
				</section>

				<section>
					<h2>URL Mapping</h2>
					<pre><code data-trim language-java>		
class UrlMappings {

    static mappings = {
        "/$controller/$action?/$id?"{
            constraints {
                // apply constraints here
            }
        }

        "/"(view:"/index")
        "500"(view:'/error')
        "404"(view:'/404')
    }
}
					</code></pre>
				</section>




				<section>
					<h2>Plugins</h2>

					<table width="100%">
						<tbody>
							<tr>
								<td>Spring Security</td>
								<td>LDAP</td>
								<td>Mongo</td>
							</tr>
							<tr>
								<td>Quartz</td>
								<td>Resources</td>
								<td>Neo4J</td>
							</tr>
							<tr>
								<td>jQuery</td>
								<td>Mail</td>
								<td>Rabbit MQ</td>
							</tr>
							<tr>
								<td>Joda</td>
								<td>Zipped Resources</td>
								<td>Redis</td>
							</tr>
							<tr>
								<td>Searchable</td>
								<td>Console</td>
								<td>...</td>
							</tr>
						</tbody>
					</table>



				</section>

				<!-- ************************************************************************ -->
				<!-- ******************************** The End ******************************* -->
				<!-- ************************************************************************ -->

				<section>
					<h1>Démo!</h1>
				</section>

				<section>
					<h1>Question?</h1>
				</section>

				<section>
					<h1>Merci!</h1>
				</section>

			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				//theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'concave', // default/cube/page/concave/zoom/linear/fade/none

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

	</body>
</html>
